
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>对《区块链信任的盲区》一文的评论 | Sean Qu is here</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Sean Qu">
    
    <meta name="description" content="刚看了发布在巴比特上的一篇文章：《区块链信任的盲区》
作者是巴比特资讯·专栏作者：常拜不败
原作者捐款地址：16iQ55vkDKtJyg13rqR9x96qYNtGBq58kq
编辑：bitPaul
原文链接：http://www.8btc.com/chaintrust0279
本人对作者的观点不甚">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="Sean Qu is here" title="Sean Qu is here"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Sean Qu is here">Sean Qu is here</a></h1>
				<h2 class="blog-motto">Learning by Sharing</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:seanqu.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/16/a-comment/" title="对《区块链信任的盲区》一文的评论" itemprop="url">对《区块链信任的盲区》一文的评论</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://seanqu.com" title="Sean Qu">Sean Qu</a>
    </p>
  <p class="article-time">
    <time datetime="2014-07-16T10:57:54.000Z" itemprop="datePublished">7月 16 2014</time>
    更新日期:<time datetime="2014-07-16T05:09:14.000Z" itemprop="dateModified">7月 16 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链大敌之————素数分布假说"><span class="toc-number">1.</span> <span class="toc-text">区块链大敌之————素数分布假说</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链大敌之————并行计算"><span class="toc-number">2.</span> <span class="toc-text">区块链大敌之————并行计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#迷失货币学"><span class="toc-number">3.</span> <span class="toc-text">迷失货币学</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#货币去中心化演变的历史"><span class="toc-number">4.</span> <span class="toc-text">货币去中心化演变的历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#货币背书的演变"><span class="toc-number">5.</span> <span class="toc-text">货币背书的演变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#信用货币的崛起"><span class="toc-number">6.</span> <span class="toc-text">信用货币的崛起</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#走出盲区：直接背书信用？"><span class="toc-number">7.</span> <span class="toc-text">走出盲区：直接背书信用？</span></a></li></ol>
		</div>
		
		<p>刚看了发布在巴比特上的一篇文章：《区块链信任的盲区》</p>
<p>作者是巴比特资讯·专栏作者：常拜不败</p>
<p>原作者捐款地址：16iQ55vkDKtJyg13rqR9x96qYNtGBq58kq</p>
<p>编辑：bitPaul</p>
<p>原文链接：<a href="http://www.8btc.com/chaintrust0279" target="_blank" rel="external">http://www.8btc.com/chaintrust0279</a></p>
<p>本人对作者的观点不甚认同。于是转载下来，针对作者的一些观点进行简单辩论。论述有错误偏颇的地方欢迎文明讨论。</p>
<blockquote>
<p>区块链加密基于SHA散列，而SHA表的大小取决于一组素数。</p>
</blockquote>
<ul>
<li><p>SHA256散列只是做了区块链摘要，并非加密。摘要的目的是标识区块和出示工作量证明。</p>
</li>
<li><p>不太清楚作者SHA表这个词的意思。SHA256算法并没有使用素数，而只是使用一个素数的一部分作为起始算子。由于SHA256是将整个数据块分割后循环计算的，所以区块的的体积越大，这些起始算子对结果的影响就越小。</p>
</li>
<li><p>SHA算法具体实现，请参考文献：</p>
<p>  文献1. Descriptions of SHA-256, SHA-384, and SHA-512<br>  <a href="http://csrc.nist.gov/groups/STM/cavp/documents/shs/sha256-384-512.pdf" target="_blank" rel="external">http://csrc.nist.gov/groups/STM/cavp/documents/shs/sha256-384-512.pdf</a></p>
<p>  文献2. SHA-2系列算法wiki<br>  <a href="http://en.wikipedia.org/wiki/SHA-2" target="_blank" rel="external">http://en.wikipedia.org/wiki/SHA-2</a></p>
</li>
<li><p>哈希碰撞率可参考文献：</p>
<p>  文献3. 哈希碰撞概率<br>  <a href="http://preshing.com/20110504/hash-collision-probabilities/" target="_blank" rel="external">http://preshing.com/20110504/hash-collision-probabilities/</a></p>
</li>
</ul>
<blockquote>
<p>为什么是素数呢？因为在做映射时，被映射的空间大小是素数。 如果不是用素数来做mod运算的话,很多数据分布会形成“碰撞”.</p>
</blockquote>
<ul>
<li>SHA256算法中没有使用mod运算，参考：文献1 - page 6。</li>
</ul>
<blockquote>
<p>也就是两个私匙对应一个公匙的现象。所以最后采用了素数做mod的除数.那么说，这个有什么意义呢？</p>
</blockquote>
<ul>
<li><p>作者将椭圆曲线加密算法和SHA256算法搞混了。SHA256算法中没有公钥私钥概念。</p>
</li>
<li><p>椭圆曲线加密算法及实现参考文献：</p>
<p>  文献4. ECDSA wiki<br>  <a href="http://en.wikipedia.org/wiki/Elliptic_Curve_DSA" target="_blank" rel="external">http://en.wikipedia.org/wiki/Elliptic_Curve_DSA</a></p>
<p>  文献5. generating a bitcoin address with javascript<br>  <a href="http://procbits.com/2013/08/27/generating-a-bitcoin-address-with-javascript" target="_blank" rel="external">http://procbits.com/2013/08/27/generating-a-bitcoin-address-with-javascript</a></p>
</li>
</ul>
<blockquote>
<p>因为一旦数据结构散列在素数分布上，区块链信任的前提就和RSA一样，就建立在“素数分布是没有规律的”这种假说（尚未确信为自然公理）上了。</p>
</blockquote>
<ul>
<li>基于以上分析，作者这个结论不成立。</li>
</ul>
<blockquote>
<p>由于未知素数分布的规律，就只有计算举穷数据大小得出所需的算力，由算力\硬件配置，从而推导出所需要的时间，当所需要的时间非常大的时候，我们得出区块链是值得信任的这一结果。</p>
<p>可是这里面有两个前题，第一是“素数分布是没有规律的”这件事。按照学院派的看法，素数分布是否有规律尚待验证，只是我们暂时未知其规律而已（可能存在某种规律、也可能的确不存在）。</p>
<p>因此，比特币信任的前提是：一条尚未验证的假说。</p>
<p>另外，并行计算则是区块链信任的另一潜在的大敌。</p>
<h3 id="区块链大敌之————素数分布假说">区块链大敌之————素数分布假说</h3>
<p>1 3 5 7 11 13……我们可以知道这些素数的位置，例如“13”就是第六位素数，可是，如果我要问你一个比较大的素数的时候，就难以回答了。</p>
<p>拿梅森素数（2p－1，p为素数）为例来说，人类目前已知的只有48位，而这已知的48位，全部是通过穷举算出来的。</p>
<p>如果你能通过计算机算出第49位，那么恭喜你，可以立即获得美国电子前沿基金会的10万美金奖励。如果你更进一步通过“某种公式”算出第49位，那么先不要着急公布，你可以直接转走整个市场上所有的比特币。并且，会获得美国克雷数学研究所提供的100万美元的奖励，因为，你已经成功的破解了黎曼猜想。</p>
<p>有同学可能会问，素数分布或梅森素数分布到底有无规律？对此我只能说……呵呵……抛开这个问题不谈，有无规律本身就已经构成了悬念，而这个悬念，就是长期持币者无法回避的一个问题。</p>
</blockquote>
<ul>
<li><p>这一大段论证，都针对作者错误理解比特币后，提出的一个不成立的论点，不需要进行反驳。但由于很多专业知识夹杂其中，容易让人误会或迷信专业知识。</p>
</li>
<li><p>就以“梅森素数”来说：</p>
<ol>
<li><p>原文说梅森素数都是穷举法算出来的。前十几个梅森素数很可能是使用穷举法（没有深入研究），但随着数越来越大，根本无法使用穷举法，只能使用先猜测后验证的方法。实际上第44到第48个梅森素数中间到底还有没有梅森素数，目前还不确定。如果真的使用穷举法，肯定是可以确定的。（最近一个梅森素数是2013年1月25日发现的）</p>
</li>
<li><p>关于寻找素数规律的问题，还有黎曼猜想什么的就不讨论了，属于数学未解之谜。即使破解了，目测跟比特币关系也不大。(作者用这个来吓唬小白，不太厚道)</p>
<p>文献6.<br>梅森素数 <a href="http://zh.wikipedia.org/wiki/%E6%A2%85%E6%A3%AE%E7%B4%A0%E6%95%B0" target="_blank" rel="external">http://zh.wikipedia.org/wiki/%E6%A2%85%E6%A3%AE%E7%B4%A0%E6%95%B0</a></p>
</li>
</ol>
</li>
</ul>
<blockquote>
<h3 id="区块链大敌之————并行计算">区块链大敌之————并行计算</h3>
<p>区块链安全的另一大杀手来自并行计算， 并行计算可以极大的缩短穷举时间，从而直接杀死比特币、以及其他一切山寨币。</p>
<p>什么是并行计算呢？小到抛硬币下注，大到买彩票、结婚、买卖比特币……整个人生的一切，都离不开“并行计算”。</p>
<p>并行计算可分为针对过去、现在、未来三种。</p>
<p>针对未来的并行计算，德国 vs 荷兰 谁赢？</p>
<p>硬币转动中（并行计算中……) ，硬币停止转动（结果呈现）</p>
<p>针对过去的并行计算，上届世界杯德国，巴西谁是冠军？</p>
<p>硬币转动中（并行计算中……) ，硬币停止转动（结果呈现）</p>
<p>针对当下的并行计算……</p>
</blockquote>
<ul>
<li><p>这个论点，俺看懂了。论据，真的没看懂…</p>
</li>
<li><p>德国 VS 阿根廷</p>
</li>
<li><p>不知道作者理解的并行计算具体定义是什么。但是按照常规的定义，现在的矿机都使用了并行计算技术。</p>
</li>
<li><p>所以，并行计算杀死比特币的问题作者说反了。应该是：<strong>没有并行计算，比特币就不存在。</strong></p>
</li>
</ul>
<blockquote>
<h3 id="迷失货币学">迷失货币学</h3>
<p>有人可能会问：“既然区块链信任有此两大劲敌，可是目前，比特币仍然有80亿美元市值呀？这又是为什么呢？</p>
<p>我想，这可能和：第一个人是聪明人,他判断，会来一个傻子，结果，这个傻子判断，还会来一个比他更傻的……以此类推（接盘侠？）。</p>
</blockquote>
<ul>
<li>逻辑错误。再次使用“庞氏骗局”、“博傻论”。很多文章讨论过这个观点，这里不赘述。</li>
</ul>
<ul>
<li><p>比特币的价格是比特币系统使用价值的体现。生存在比特币系统中的比特币是稀缺的、易传递的、无法双重支付、没有中央发行机构、广泛被认可的商品。离开了这一系统，比特币什么都不是。</p>
</li>
<li><p>如果傻子都能像使用纸币一样轻松愉悦地使用比特币，比特币价值会更高。</p>
</li>
</ul>
<blockquote>
<h3 id="货币去中心化演变的历史">货币去中心化演变的历史</h3>
<p>票号是中国最早的金融机构，票号在大家普遍使用黄金白银的年代，衍生出” 纸币“，进而发展出”银行“概念，不得不说是社会的进步。</p>
<p>以山西票号”日盛昌“为例，大大小小在全国乃至世界都开有”分号“（节点），建立了一个“分布式总账”。然后用抵押进来的白银，从事银行业务，取得了巨大的成功。</p>
<p>那么，曾经为商业做出过巨大贡献的山西票号，为什么在商业银行的崛起下落败了呢？</p>
<p>商业银行的纸币，其实也是一种票号，只不过，法币相对于票号，揉入了“国家信任”概念。</p>
<p>我们知道，1934年全球进入了美元锚定黄金的年代(布雷顿森林体系）。这种锚定直接导致了现代商业银行的崛起。对票号的白银锚定汇票业务构成冲击。</p>
<p>大家读到这里可能会问，为什么锚定黄金的纸币会冲击到票号呢？答案很简单，在这种模式下，建立起来的银行体系，可以滥发纸币了，因此才有了1972年尼克松总统宣布违约，不再履行35美元锚定一盎司黄金的承诺，从而失信于全球各国央行。</p>
<p>但恰恰是这种失信，造就了进一步去中心化的货币“无黄金背书纸币”（牙买加浮动汇率体系）的诞生，可以说整个一个货币史，就是一部去中心化的历史。</p>
</blockquote>
<ul>
<li><p>票号不是中国最早的金融机构。典当行业才是。</p>
</li>
<li><p>日升昌的败落并非源于商业银行的崛起，实际上日升昌就是清代最大的商业银行。日升昌倒闭，主要源于对战争准备不足。由于战争导致其发行的纸币各地区分配极度不均，而现货金银运输成本很高，无法满足兑换，产生局部挤兑，最终引发恐慌。</p>
</li>
</ul>
<blockquote>
<h3 id="货币背书的演变">货币背书的演变</h3>
<p>美元也称“国家信用货币”：其背书的是美国的国家信用。也正因为这一点，比特币的批判者们，常常批判比特币没有“信用”背书。</p>
<p>可是这里面矛盾的是，所谓“国家信用”是一个模糊的概念，美联储窃取了“信任”概念，代之“国家信用”发行的纸币，极大的打击了长期持币者的信心。</p>
<p>我们知道，自美元发行以来，其实际购买力下降了90%以上。</p>
<p>对于比特币，只要算力集中在少数几个矿工手里，危险就在酝酿，爆发只是时间问题。</p>
<p>因此去中心化、P2P、开源的比特币，在2008年频繁的经济危机中应运而生。比特币高喊“去中心化”，把权利还给人民，可是在执行过程中走上了老路。</p>
<p>算力集中的威胁，使得部分“去中心化爱好者”加入POS的阵营。但POS阵营也很快出现问题，大家发现，币量多的人，似乎拥有某种权利，违背了“去中心化的精神”。</p>
<p>仔细想来，P2P、开源……等等，关于比特币的一切，都直指一个共同“去中心化”的核心。</p>
<p>在货币的演变史上，我们也的确看到，在朝这个目标逼近。某种思潮认为，不必要达到100%，只要无限逼近就好了。可是，技术的进步无止境，货币去中心化的需求，也是无止境的。谁能进一步提高货币的去中心化程度，谁就能在货币战争中存活下来。</p>
<h3 id="信用货币的崛起">信用货币的崛起</h3>
<p>去中心化意味着公开、透明，因而有了信用。在有了信用之后，如果背弃公开透明，则会失去信用。</p>
<p>我们看到，曾经的美金，在获取了货币地位后，不断上演着失信、贬值……从而导致了加密货币区块链信用的崛起。</p>
<p>而区块链信用本身呢？我们只能说：在盲区内是安全的，盲区外就没有未必信用了。</p>
<h3 id="走出盲区：直接背书信用？">走出盲区：直接背书信用？</h3>
<p>那么，既然区块链技术有“盲区”，那么，我们能不能设想，一种直接背书信用的p2p货币呢？</p>
<p>以山西票号为例，直接发行一种票号币，放弃之前的黄金背书，直接背书“信用”本身。以其全国各个分号做节点，模仿现代银行模式，用比特币区块链技术辅助记账，因此票号币有了“信用”，p2p、开源、去中心化……等，全部比特币的优势，避免了比特币区块链的盲区。</p>
<p>因为，区块链技术是一种辅助记账工具。因此这种信用货币，被注入了人文特征。</p>
</blockquote>
<ul>
<li><p>这三大段想表达的意思就是：1.比特币不靠谱。2.法币不靠谱。3.不如建立一个电子票号，发行自己的货币，用信用竞争吸引用户。</p>
</li>
<li><p>作者的梦想和奥派经济学的梦想不谋而合。这不就是货币的非国家化么？！</p>
</li>
<li><p>等等，为啥支付宝不直接发行支付宝币呢？QQ币如果自由兑换不就直接变成票号币了么，腾讯为什么不干？！</p>
</li>
<li><p>偷偷告诉你，私自发行货币是违法的。</p>
</li>
<li><p>最后，祝票号币成功：)真心祝福，因为如果成功了，必然是中国经济体制的一次重大改革。</p>
</li>
<li><p>但，请各位注意人身安全。</p>
</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/bitcoin/">bitcoin</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/bitcoin/">bitcoin</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://seanqu.com/2014/07/16/a-comment/" data-title="对《区块链信任的盲区》一文的评论 | Sean Qu is here" data-tsina="shuangqu2010" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/07/16/difficulty/" title="比特币地址碰撞概率">
  <strong>PREVIOUS:</strong><br/>
  <span>
  比特币地址碰撞概率</span>
</a>
</div>


<div class="next">
<a href="/2014/03/19/what-is-bitcoin-really/"  title="比特币到底是什么，说真的？（what is a bitcoin ,really?）">
 <strong>NEXT:</strong><br/> 
 <span>比特币到底是什么，说真的？（what is a bitcoin ,really?）
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链大敌之————素数分布假说"><span class="toc-number">1.</span> <span class="toc-text">区块链大敌之————素数分布假说</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链大敌之————并行计算"><span class="toc-number">2.</span> <span class="toc-text">区块链大敌之————并行计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#迷失货币学"><span class="toc-number">3.</span> <span class="toc-text">迷失货币学</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#货币去中心化演变的历史"><span class="toc-number">4.</span> <span class="toc-text">货币去中心化演变的历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#货币背书的演变"><span class="toc-number">5.</span> <span class="toc-text">货币背书的演变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#信用货币的崛起"><span class="toc-number">6.</span> <span class="toc-text">信用货币的崛起</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#走出盲区：直接背书信用？"><span class="toc-number">7.</span> <span class="toc-text">走出盲区：直接背书信用？</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  <div class="donate">
	<p class="asidetitle">捐助</p>
	<br>
	<ul>
	  <li></li>
	  <li><a href="https://www.bifubao.com/pay?product_hash_id=dc1b158a01b4c45f754fde558948bb8769c8f13a6c28d0b9aaba9533c1b19f86"><img height="32" src="https://www.bifubao.com/css/img/pay_btn_en_2_2x.png"/></a></li>
		

</div>

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/bitcoin/" title="bitcoin">bitcoin<sup>5</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/bitcoin/" title="bitcoin">bitcoin<sup>5</sup></a></li>
		
			<li><a href="/tags/markdown/" title="markdown">markdown<sup>1</sup></a></li>
		
			<li><a href="/tags/translate/" title="translate">translate<sup>2</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/http://weibo.com/shuangqu2010" target="_blank" title="weibo"></a>
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://seanqu.com" target="_blank" title="Sean Qu">Sean Qu</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
